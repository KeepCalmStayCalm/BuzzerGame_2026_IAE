<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ButtonBar?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane
    prefHeight="620.0" prefWidth="860.0"
    style="-fx-background-color: #161b22;"
    stylesheets="@../application/buzzerStyle2025.css"
    xmlns="http://javafx.com/javafx/24.0.1"
    xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="view.EditSettingsViewController">

    <!-- ── Title bar ───────────────────────────────────────── -->
    <top>
        <VBox style="-fx-padding: 28 28 0 28;">
            <children>
                <Label
                    text="Einstellungen"
                    style="-fx-text-fill: #ffffff; -fx-font-size: 28pt; -fx-font-weight: bold;" />
                <Label
                    text="Spielkonfiguration und Hardware-Test"
                    style="-fx-text-fill: #8b949e; -fx-font-size: 14pt; -fx-font-weight: normal; -fx-padding: 4 0 14 0;" />
                <Separator style="-fx-opacity: 0.30;" />
            </children>
        </VBox>
    </top>

    <!-- ── Main content ────────────────────────────────────── -->
    <center>
        <VBox spacing="0.0"
              BorderPane.alignment="CENTER">
            <BorderPane.margin><Insets bottom="10.0" left="28.0" right="28.0" top="18.0" /></BorderPane.margin>
            <children>

                <!-- Game settings grid -->
                <GridPane hgap="20.0" vgap="16.0">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" maxWidth="280.0" minWidth="10.0" prefWidth="240.0" />
                        <ColumnConstraints hgrow="ALWAYS"    maxWidth="540.0" minWidth="10.0" prefWidth="540.0" />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints fillHeight="false" minHeight="10.0" vgrow="SOMETIMES" />
                        <RowConstraints fillHeight="false" minHeight="10.0" vgrow="SOMETIMES" />
                        <RowConstraints fillHeight="false" minHeight="10.0" vgrow="SOMETIMES" />
                        <RowConstraints fillHeight="false" minHeight="10.0" vgrow="SOMETIMES" />
                    </rowConstraints>
                    <children>
                        <!-- Labels -->
                        <Label text="Fragedatei"
                               style="-fx-text-fill: #c9d1d9; -fx-font-size: 15pt;"
                               GridPane.rowIndex="0" />
                        <Label text="Anzahl Fragen je Runde"
                               style="-fx-text-fill: #c9d1d9; -fx-font-size: 15pt;"
                               GridPane.rowIndex="1" />
                        <Label text="Zeit je Frage"
                               style="-fx-text-fill: #c9d1d9; -fx-font-size: 15pt;"
                               GridPane.rowIndex="2" />
                        <Label text="Zufällige Reihenfolge"
                               style="-fx-text-fill: #c9d1d9; -fx-font-size: 15pt;"
                               GridPane.rowIndex="3" />

                        <!-- File picker -->
                        <HBox spacing="10.0" GridPane.columnIndex="1" GridPane.rowIndex="0">
                            <children>
                                <TextField fx:id="txtQuestionFile" HBox.hgrow="ALWAYS" />
                                <Button mnemonicParsing="false"
                                        onAction="#openFileChooser"
                                        text="…"
                                        styleClass="btn-secondary"
                                        style="-fx-font-size: 14pt; -fx-padding: 6px 18px;" />
                            </children>
                        </HBox>

                        <!-- Question count -->
                        <ComboBox
                            fx:id="comboAnzahlFragen"
                            prefHeight="38.0" prefWidth="200.0"
                            GridPane.columnIndex="1" GridPane.rowIndex="1" />

                        <!-- Time per question -->
                        <HBox alignment="CENTER_LEFT" spacing="12.0"
                              GridPane.columnIndex="1" GridPane.rowIndex="2">
                            <children>
                                <ComboBox
                                    fx:id="comboZeitFrage"
                                    prefHeight="38.0" prefWidth="200.0" />
                                <Label
                                    text="Sekunden"
                                    style="-fx-text-fill: #8b949e; -fx-font-size: 14pt; -fx-font-weight: normal;" />
                            </children>
                        </HBox>

                        <!-- Random toggle -->
                        <HBox alignment="CENTER_LEFT" spacing="24.0"
                              GridPane.columnIndex="1" GridPane.rowIndex="3">
                            <children>
                                <RadioButton
                                    fx:id="toggleRandomQuestionTrue"
                                    mnemonicParsing="false"
                                    selected="true"
                                    text="Ja">
                                    <toggleGroup>
                                        <ToggleGroup fx:id="randomQuestions" />
                                    </toggleGroup>
                                </RadioButton>
                                <RadioButton
                                    fx:id="toggleRandomQuestionFalse"
                                    mnemonicParsing="false"
                                    text="Nein"
                                    toggleGroup="$randomQuestions" />
                            </children>
                        </HBox>
                    </children>
                    <padding><Insets bottom="8.0" /></padding>
                </GridPane>

                <Separator style="-fx-opacity: 0.25; -fx-padding: 12 0 12 0;" />

                <!-- Hardware test section -->
                <VBox spacing="14.0" style="-fx-padding: 16 0 0 0;">
                    <children>
                        <Label
                            text="Hardware-Test"
                            style="-fx-text-fill: #ffffff; -fx-font-size: 18pt; -fx-font-weight: bold;" />
                        <Label
                            text="Drücke jeden Buzzer-Knopf, um die GPIO-Zuordnung zu prüfen."
                            style="-fx-text-fill: #8b949e; -fx-font-size: 13pt; -fx-font-weight: normal;" />

                        <HBox prefHeight="120.0" spacing="20.0">
                            <children>

                                <!-- Buzzer 1 -->
                                <VBox alignment="TOP_CENTER" spacing="12.0" HBox.hgrow="ALWAYS"
                                      style="-fx-background-color: rgba(48,54,61,0.40);
                                             -fx-border-color: #30363d; -fx-border-width: 1.5px;
                                             -fx-border-radius: 10px; -fx-background-radius: 10px;
                                             -fx-padding: 14px;">
                                    <children>
                                        <Label text="Buzzer 1"
                                               style="-fx-text-fill: #58a6ff; -fx-font-size: 15pt; -fx-font-weight: bold;" />
                                        <HBox alignment="CENTER" spacing="18.0">
                                            <children>
                                                <RadioButton fx:id="gpio1A" mnemonicParsing="false" text="A" />
                                                <RadioButton fx:id="gpio1B" mnemonicParsing="false" text="B" />
                                                <RadioButton fx:id="gpio1C" mnemonicParsing="false" text="C" />
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>

                                <!-- Buzzer 2 -->
                                <VBox alignment="TOP_CENTER" spacing="12.0" HBox.hgrow="ALWAYS"
                                      style="-fx-background-color: rgba(48,54,61,0.40);
                                             -fx-border-color: #30363d; -fx-border-width: 1.5px;
                                             -fx-border-radius: 10px; -fx-background-radius: 10px;
                                             -fx-padding: 14px;">
                                    <children>
                                        <Label text="Buzzer 2"
                                               style="-fx-text-fill: #58a6ff; -fx-font-size: 15pt; -fx-font-weight: bold;" />
                                        <HBox alignment="CENTER" spacing="18.0">
                                            <children>
                                                <RadioButton fx:id="gpio2A" mnemonicParsing="false" text="A" />
                                                <RadioButton fx:id="gpio2B" mnemonicParsing="false" text="B" />
                                                <RadioButton fx:id="gpio2C" mnemonicParsing="false" text="C" />
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>

                                <!-- Buzzer 3 -->
                                <VBox alignment="TOP_CENTER" spacing="12.0" HBox.hgrow="ALWAYS"
                                      style="-fx-background-color: rgba(48,54,61,0.40);
                                             -fx-border-color: #30363d; -fx-border-width: 1.5px;
                                             -fx-border-radius: 10px; -fx-background-radius: 10px;
                                             -fx-padding: 14px;">
                                    <children>
                                        <Label text="Buzzer 3"
                                               style="-fx-text-fill: #58a6ff; -fx-font-size: 15pt; -fx-font-weight: bold;" />
                                        <HBox alignment="CENTER" spacing="18.0">
                                            <children>
                                                <RadioButton fx:id="gpio3A" mnemonicParsing="false" text="A" />
                                                <RadioButton fx:id="gpio3B" mnemonicParsing="false" text="B" />
                                                <RadioButton fx:id="gpio3C" mnemonicParsing="false" text="C" />
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>

                            </children>
                        </HBox>
                    </children>
                </VBox>

            </children>
        </VBox>
    </center>

    <!-- ── Footer buttons ──────────────────────────────────── -->
    <bottom>
        <VBox style="-fx-padding: 0 28 0 28;">
            <children>
                <Separator style="-fx-opacity: 0.25;" />
                <ButtonBar prefHeight="64.0" style="-fx-padding: 14 0 14 0;">
                    <buttons>
                        <Button
                            mnemonicParsing="false"
                            onAction="#cancel"
                            text="Abbrechen"
                            styleClass="btn-secondary"
                            style="-fx-font-size: 15pt; -fx-padding: 8px 28px;" />
                        <Button
                            mnemonicParsing="false"
                            onAction="#save"
                            text="Speichern"
                            styleClass="btn-primary"
                            style="-fx-font-size: 15pt; -fx-padding: 8px 28px;" />
                    </buttons>
                </ButtonBar>
            </children>
        </VBox>
    </bottom>

</BorderPane>
